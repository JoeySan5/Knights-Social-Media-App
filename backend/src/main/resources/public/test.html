<!DOCTYPE html>
<html>
<head>
    <title>Google Login Demo with Google Identity Services</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <div id="g_id_onload"
         data-client_id="1019349198762-463i1tt2naq9ipll3f9ade5u7nli7gju.apps.googleusercontent.com         "
         data-callback="onSignIn">
    </div>
    <div class="g_id_signin"
         data-type="standard"
         data-size="large"
         data-theme="outline"
         data-text="sign_in_with"
         data-shape="rectangular"
         data-logo_alignment="left">
    </div>

    <script>
        function onSignIn(response) {
            var id_token = response.credential;

            console.log('Google 토큰을 받는데 성공했습니다: ' + id_token);
            var xhr = new XMLHttpRequest();
            xhr.open('POST', '/login');
            xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
            xhr.onload = function() {
                console.log('Signed in as: ' + xhr.responseText);
            };
            xhr.send('idtoken=' + id_token);
        }
    </script>

    <!-- Sign out 기능을 원하는 경우에 아래 함수를 사용하시면 됩니다. -->
    <script>
        function signOut() {
            google.accounts.id.disableAutoSelect();

            // Google 로그아웃 URL로 리디렉션하여 완전히 로그아웃할 수 있습니다.
            var logoutUrl = 'https://accounts.google.com/Logout';
            window.location.assign(logoutUrl);
        }
    </script>
    
    <button onclick="signOut();">Sign out</button>
</body>
</html>